(this["webpackJsonptask-tracker"]=this["webpackJsonptask-tracker"]||[]).push([[0],{113:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(25),c=r.n(n),s=r(7),o=r(33),i=r(73),l=r(74),u=r(12),j="PRODUCT_LIST_REQUEST",d="PRODUCT_LIST_SUCCESS",b="PRODUCT_LIST_FAIL",p="SINGLE_PRODUCT_REQUEST",O="SINGLE_PRODUCT_SUCCESS",h="SINGLE_PRODUCT_FAIL",f="PRODUCT_TOP_REQUEST",x="PRODUCT_TOP_SUCCESS",m="PRODUCT_TOP_FAIL",g=r(29),v="CART_ADD_ITEM",y="CART_REMOVE_ITEM",S="LOGIN_REQUEST",C="LOGIN_SUCCESS",I="LOGIN_FAIL",k="REGISTER_REQUESTL",w="REGISTER_SUCCESS",E="REGISTER_FAIL",L="USER_DETAILS_REQUESTL",T="USER_DETAILS_SUCCESS",_="USER_DETAILS_FAIL",N="LOGOUT",R="ADD_ALERT",P="REMOVE_ALERT",U=Object(o.combineReducers)({productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return{loading:!0,products:[]};case d:return{loading:!1,products:t.payload};case b:return{loading:!1,error:t.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(u.a)({loading:!0},e);case O:return{loading:!1,product:t.payload};case h:return{loading:!1,error:t.payload};default:return e}},topRatedProduct:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{loading:!0,products:[]};case x:return{loading:!1,products:t.payload};case m:return{loading:!1,error:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:var r=t.payload,a=e.cartItems.find((function(e){return e._id===r._id}));return a?Object(u.a)(Object(u.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e._id===r._id?r:e}))}):Object(u.a)(Object(u.a)({},e),{},{cartItems:[].concat(Object(g.a)(e.cartItems),[r])});case y:var n=e.cartItems.filter((function(e){return e._id!==t.payload._id}));return Object(u.a)(Object(u.a)({},e),{},{cartItems:n});default:return e}},siteSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{loading:!0};case C:return{loading:!1,userInfo:t.payload};case I:return{loading:!1,error:t.payload};case N:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return{loading:!0};case w:return{loading:!1,userInfo:t.payload};case E:return{loading:!1,error:t.payload};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case T:return{loading:!1,user:t.payload};case _:return{loading:!1,error:t.payload};default:return e}},alerts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errorMessages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(u.a)(Object(u.a)({},e),{},{errorMessages:[].concat(Object(g.a)(e.errorMessages),[t.payload])});case P:return Object(u.a)(Object(u.a)({},e),{},{errorMessages:e.errorMessages.filter((function(e){return e._id!==t.payload}))});default:return e}}}),D={siteSettings:{websiteCurreny:"R"},cart:{cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[]},userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},G=[i.a],A=Object(o.createStore)(U,D,Object(l.composeWithDevTools)(o.applyMiddleware.apply(void 0,G))),F=(r(87),r(88),r(13)),q=r(10),M=r(119),J=r(42),B=r(126),Q=r(129),z=r(123),H=r(8),V=r.n(H),W=r(17),Y=r(28),K=r.n(Y),X=r(15),Z=r(124),$=r(77),ee=r(1),te=function(e){var t=e.history,r=Object(a.useState)(""),n=Object(X.a)(r,2),c=n[0],s=n[1];return Object(ee.jsxs)(Z.a,{onSubmit:function(e){e.preventDefault(),c.trim()?t.push("/search/".concat(c)):t.push("/")},inline:!0,children:[Object(ee.jsx)(Z.a.Control,{type:"text",name:"q",onChange:function(e){return s(e.target.value)},placeholder:"Search Products...",className:"mr-sm-2 ml-sm-5"}),Object(ee.jsx)($.a,{type:"submit",variant:"outline-success",className:"p-2",children:"Search"})]})},re=function(){var e=Object(s.c)((function(e){return e.userLogin})).userInfo,t=Object(s.b)();return Object(ee.jsx)("header",{children:Object(ee.jsx)(B.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(ee.jsxs)(M.a,{children:[Object(ee.jsx)(J.LinkContainer,{to:"/",children:Object(ee.jsx)(B.a.Brand,{children:"Leavealot"})}),Object(ee.jsx)(B.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(ee.jsxs)(B.a.Collapse,{id:"basic-navbar-nav",children:[Object(ee.jsx)(q.d,{render:function(e){var t=e.history;return Object(ee.jsx)(te,{history:t})}}),Object(ee.jsxs)(Q.a,{className:"ml-auto",children:[Object(ee.jsx)(J.LinkContainer,{to:"/cart",children:Object(ee.jsxs)(Q.a.Link,{children:[Object(ee.jsx)("i",{className:"fas fa-shopping-cart"})," Cart"]})}),e?Object(ee.jsxs)(z.a,{title:e.name,id:"username",children:[Object(ee.jsx)(J.LinkContainer,{to:"/profile",children:Object(ee.jsx)(z.a.Item,{children:"Profile"})}),Object(ee.jsx)(z.a.Item,{onClick:function(){t(function(){var e=Object(W.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:N}),localStorage.removeItem("userInfo");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]}):Object(ee.jsx)(J.LinkContainer,{to:"/login",children:Object(ee.jsxs)(Q.a.Link,{children:[Object(ee.jsx)("i",{className:"fas fa-user"})," Login"]})})]})]})]})})})};re.defaultProps={title:"Task Header"};var ae=re,ne=r(120),ce=r(76),se=function(){return Object(ee.jsx)("footer",{children:Object(ee.jsx)(M.a,{children:Object(ee.jsx)(ne.a,{children:Object(ee.jsx)(ce.a,{className:"text-center py-3",children:"Copyright \xa9 Thiomark"})})})})},oe=r(130),ie=r(6),le=r.n(ie),ue=function(e){var t=e.value,r=e.text,a=e.colour;return Object(ee.jsxs)("div",{className:"rating",children:[Object(ee.jsx)("span",{children:Object(ee.jsx)("i",{style:{color:a},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(ee.jsx)("span",{children:Object(ee.jsx)("i",{style:{color:a},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(ee.jsx)("span",{children:Object(ee.jsx)("i",{style:{color:a},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(ee.jsx)("span",{children:Object(ee.jsx)("i",{style:{color:a},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(ee.jsx)("span",{children:Object(ee.jsx)("i",{style:{color:a},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(ee.jsx)("span",{children:r&&r})]})};ue.defaultProps={colour:"#f8e825"},ue.prototype={value:le.a.number.isRequired,text:le.a.string.isRequired,colour:le.a.string};var je=ue,de=function(e){var t=e.product,r=Object(s.c)((function(e){return e.siteSettings.websiteCurreny}));return Object(ee.jsxs)(oe.a,{className:"my-3 p-3 rounded",children:[Object(ee.jsx)(F.Link,{to:"/product/".concat(t._id),children:Object(ee.jsx)(oe.a.Img,{src:t.image,variant:"top"})}),Object(ee.jsxs)(oe.a.Body,{children:[Object(ee.jsx)(F.Link,{to:"/product/".concat(t._id),children:Object(ee.jsx)(oe.a.Title,{as:"div",children:Object(ee.jsx)("strong",{children:t.name})})}),Object(ee.jsx)(oe.a.Text,{as:"div",children:Object(ee.jsx)(je,{value:t.rating,text:"".concat(t.numReviews," reviews")})}),Object(ee.jsx)(oe.a.Text,{as:"h3",children:"".concat(r," ").concat(t.price)})]})]})},be=r(121),pe={width:"100px",height:"100px",margin:"auto",display:"block"},Oe=function(){return Object(ee.jsx)(be.a,{animation:"border",role:"status",style:pe,children:Object(ee.jsx)("span",{className:"sr-only",children:"Loading..."})})},he=r(127),fe=function(e,t){return function(){var r=Object(W.a)(V.a.mark((function r(a){var n;return V.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=Object(he.a)(),a({type:R,payload:{errorMessage:e,errorType:t,_id:n}}),setTimeout((function(){a({type:P,payload:n})}),5e3);case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},xe=r(125),me=r(122),ge=r(128),ve=function(e){var t=e.variant,r=e.children;return Object(ee.jsx)(ge.a,{variant:t,children:r})};ve.defaultProps={variant:"info"};var ye=ve,Se=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.topRatedProduct})),r=t.loading,n=t.error,c=t.products;return Object(a.useEffect)((function(){e(function(){var e=Object(W.a)(V.a.mark((function e(t){var r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:f}),e.next=4,K.a.get("/api/v1/products/top");case 4:r=e.sent,a=r.data,t({type:x,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:m,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.response});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),r?Object(ee.jsx)(a.Fragment,{}):n?Object(ee.jsx)(ye,{variant:"danger",children:n}):Object(ee.jsx)(xe.a,{pause:"hover",className:"bg-dark",children:c.map((function(e){return Object(ee.jsx)(xe.a.Item,{children:Object(ee.jsxs)(F.Link,{to:"/product/".concat(e._id),children:[Object(ee.jsx)("div",{className:"make-plan",children:Object(ee.jsx)(me.a,{src:e.image,alt:e.name,fluid:!0})}),Object(ee.jsx)(xe.a.Caption,{className:"carousel-caption",children:Object(ee.jsxs)("h2",{children:[e.name," R",e.price]})})]})},e._id)}))})},Ce=function(e){var t=e.match.params.keyword,r=Object(s.b)(),n=Object(s.c)((function(e){return e.productList})),c=n.loading,o=n.error,i=n.products;return Object(a.useEffect)((function(){o&&r(fe(o,"danger")),r(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(W.a)(V.a.mark((function t(r){var a,n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:j}),t.next=4,K.a.get("/api/v1/products?keyword=".concat(e));case 4:a=t.sent,n=a.data,r({type:d,payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:b,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.response});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[r,o,t]),Object(ee.jsxs)(ee.Fragment,{children:[!t&&Object(ee.jsx)(Se,{}),Object(ee.jsx)("h1",{style:{paddingTop:"1em"},children:"Latest Products"}),c?Object(ee.jsx)(Oe,{}):Object(ee.jsx)(ne.a,{children:i.map((function(e){return Object(ee.jsx)(ce.a,{sm:12,md:6,lg:4,xl:3,children:Object(ee.jsx)(de,{product:e})},e._id)}))})]})},Ie=r(131),ke=function(e,t){return function(){var r=Object(W.a)(V.a.mark((function r(a,n){return V.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a({type:v,payload:Object(u.a)(Object(u.a)({},e),{},{qty:t})}),localStorage.setItem("cartItems",JSON.stringify(n().cart.cartItems));case 2:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},we=function(e){return function(){var t=Object(W.a)(V.a.mark((function t(r,a){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:y,payload:e}),localStorage.setItem("cartItems",JSON.stringify(a().cart.cartItems));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},Ee=function(e){var t=e.match,r=Object(a.useState)(1),n=Object(X.a)(r,2),c=n[0],o=n[1],i=Object(a.useState)(!1),l=Object(X.a)(i,2),u=l[0],j=l[1],d=Object(s.b)(),b=Object(s.c)((function(e){return e.productDetails})),f=Object(s.c)((function(e){return e.siteSettings.websiteCurreny})),x=Object(s.c)((function(e){return e.cart})),m=b.loading,v=b.error,y=b.product,S=x.cartItems;Object(a.useEffect)((function(){var e;d((e=t.params.id,function(){var t=Object(W.a)(V.a.mark((function t(r){var a,n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:p}),t.next=4,K.a.get("/api/v1/products/".concat(e));case 4:a=t.sent,n=a.data,r({type:O,payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:h,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.response});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[d,t]),Object(a.useEffect)((function(){var e=S.find((function(e){return e._id===y._id}));j(!!e)}),[S,y._id]);var C=Object(ee.jsxs)(ne.a,{children:[Object(ee.jsx)(ce.a,{md:6,children:Object(ee.jsx)(me.a,{src:y.image,alt:y.name,fluid:!0})}),Object(ee.jsx)(ce.a,{md:3,children:Object(ee.jsxs)(Ie.a,{variant:"flush",children:[Object(ee.jsx)(Ie.a.Item,{children:Object(ee.jsx)("h3",{children:y.name})}),Object(ee.jsx)(Ie.a.Item,{children:Object(ee.jsx)(je,{value:y.rating,text:"".concat(y.numReviews," reviews")})}),Object(ee.jsx)(Ie.a.Item,{children:y.description})]})}),Object(ee.jsx)(ce.a,{md:3,children:Object(ee.jsx)(oe.a,{children:Object(ee.jsxs)(Ie.a,{children:[Object(ee.jsx)(Ie.a.Item,{children:Object(ee.jsxs)(ne.a,{children:[Object(ee.jsx)(ce.a,{children:"Price:"}),Object(ee.jsx)(ce.a,{children:Object(ee.jsx)("strong",{children:"".concat(f," ").concat(y.price)})})]})}),Object(ee.jsx)(Ie.a.Item,{children:Object(ee.jsxs)(ne.a,{children:[Object(ee.jsx)(ce.a,{children:"Status:"}),Object(ee.jsx)(ce.a,{children:y.countInStock>0?"In Stock":"Out Of Stock"})]})}),y.countInStock>0&&Object(ee.jsx)(Ie.a.Item,{children:Object(ee.jsxs)(ne.a,{children:[Object(ee.jsx)(ce.a,{children:"Qty"}),Object(ee.jsx)(ce.a,{children:Object(ee.jsx)(Z.a.Control,{as:"select",value:c,onChange:function(e){return o(e.target.value)},children:Object(g.a)(Array(y.countInStock).keys()).map((function(e){return Object(ee.jsx)("option",{value:e+1,children:e+1},e+1)}))})})]})}),Object(ee.jsx)(Ie.a.Item,{children:u?Object(ee.jsx)($.a,{onClick:function(){d(we(y))},className:"btn-block",type:"button",children:"Remove From Cart"}):Object(ee.jsx)($.a,{onClick:function(){d(ke(y,parseInt(c,10)))},disabled:0===y.countInStock,className:"btn-block",type:"button",children:"Add To Cart"})})]})})})]});return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(F.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),m?Object(ee.jsx)(Oe,{}):v?Object(ee.jsx)(ye,{variant:"danger",children:v}):C]})},Le={fontSize:"1.1em"},Te=function(e){var t=e.history,r=Object(s.b)(),a=Object(s.c)((function(e){return e.cart})),n=Object(s.c)((function(e){return e.siteSettings.websiteCurreny})),c=a.cartItems;return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(F.Link,{to:"/",className:"btn btn-light my-3",children:"Go To Products"}),0===c.length?Object(ee.jsx)(ye,{children:"Your cart is empty"}):Object(ee.jsxs)(ne.a,{children:[Object(ee.jsx)(ce.a,{md:9,children:Object(ee.jsx)(Ie.a,{variant:"flush",children:c.map((function(e){return Object(ee.jsx)(Ie.a.Item,{children:Object(ee.jsxs)(ne.a,{className:"align-items-center",children:[Object(ee.jsx)(ce.a,{md:2,children:Object(ee.jsx)(me.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(ee.jsx)(ce.a,{md:3,children:Object(ee.jsx)(F.Link,{to:"/product/".concat(e._id),children:e.name})}),Object(ee.jsx)(ce.a,{md:3,children:"".concat(n," ").concat(e.price)}),Object(ee.jsx)(ce.a,{children:Object(ee.jsx)(Z.a.Control,{as:"select",value:e.qty,onChange:function(t){return r(ke(e,Number(t.target.value)))},children:Object(g.a)(Array(e.countInStock).keys()).map((function(e){return Object(ee.jsx)("option",{value:e+1,children:e+1},e+1)}))})}),Object(ee.jsx)(ce.a,{children:Object(ee.jsx)($.a,{type:"button",variant:"light",onClick:function(){return r(we(e))},children:Object(ee.jsx)("i",{className:"fas fa-trash"})})})]})},e._id)}))})}),Object(ee.jsx)(ce.a,{md:3,children:Object(ee.jsx)(oe.a,{py:"3",children:Object(ee.jsxs)(Ie.a,{children:[Object(ee.jsxs)(Ie.a.Item,{children:[Object(ee.jsxs)("h2",{style:Le,children:["Subtotal (",c.reduce((function(e,t){return e+t.qty}),0),") items"]}),Object(ee.jsxs)("h2",{style:Le,children:[n," ",c.reduce((function(e,t){return e+t.qty*t.price}),0).toFixed(2)," items"]})]}),Object(ee.jsx)(Ie.a.Item,{children:Object(ee.jsx)($.a,{type:"button",className:"btn-block",disabled:0===c.length,onClick:function(){t.push("/login?redirect=shipping")},children:"Proceed To Checkout"})})]})})})]})]})},_e=function(e){var t=e.children;return Object(ee.jsx)(M.a,{children:Object(ee.jsx)(ne.a,{className:"justify-content-md-center",children:Object(ee.jsx)(ce.a,{xs:12,md:8,children:t})})})},Ne=function(e){var t=e.location,r=e.history,n=Object(a.useState)(""),c=Object(X.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)(""),u=Object(X.a)(l,2),j=u[0],d=u[1],b=t.search?t.search.split("=")[1]:"/",p=Object(s.b)(),O=Object(s.c)((function(e){return e.userLogin})),h=O.userInfo,f=O.error,x=O.loading;Object(a.useEffect)((function(){h&&r.push(b),f&&p(fe(f,"danger"))}),[p,r,h,b,f]);return Object(ee.jsxs)(_e,{children:[Object(ee.jsx)("h1",{children:"Sign In"}),Object(ee.jsxs)(Z.a,{onSubmit:function(e){e.preventDefault(),o&&j?(p(function(e,t){return function(){var r=Object(W.a)(V.a.mark((function r(a){var n,c,s;return V.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:S}),n={headers:{"Content-Type":"application/json"}},r.next=5,K.a.post("/api/v1/users/login",{email:e,password:t},n);case 5:c=r.sent,s=c.data,a({type:C,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),a({type:I,payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.response});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(o,j)),i(""),d("")):p(fe("test error message","danger"))},children:[Object(ee.jsxs)(Z.a.Group,{children:[Object(ee.jsx)(Z.a.Label,{children:"Email address"}),Object(ee.jsx)(Z.a.Control,{type:"email",placeholder:"Enter Email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(ee.jsxs)(Z.a.Group,{children:[Object(ee.jsx)(Z.a.Label,{children:"Password"}),Object(ee.jsx)(Z.a.Control,{type:"password",placeholder:"Enter Password",value:j,onChange:function(e){return d(e.target.value)}})]}),Object(ee.jsx)($.a,{type:"submit",variant:"primary",disabled:x,children:x?"loading...":"Sign In"})]}),Object(ee.jsx)(ne.a,{className:"py-3",children:Object(ee.jsxs)(ce.a,{children:["New Customer? ",Object(ee.jsx)(F.Link,{to:b?"/register?redirect=".concat(b):"/register",children:"Register"})]})})]})},Re=function(e){var t=e.location,r=e.history,n=Object(a.useState)(""),c=Object(X.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)(""),u=Object(X.a)(l,2),j=u[0],d=u[1],b=Object(a.useState)(""),p=Object(X.a)(b,2),O=p[0],h=p[1],f=Object(a.useState)(""),x=Object(X.a)(f,2),m=x[0],g=x[1],v=t.search?t.search.split("=")[1]:"/",y=Object(s.b)(),S=Object(s.c)((function(e){return e.userRegister})),I=S.userInfo,L=S.error,T=S.loading;Object(a.useEffect)((function(){L&&y(fe(L,"danger")),I&&r.push(v)}),[r,I,v,y,L]);return Object(ee.jsxs)(_e,{children:[Object(ee.jsx)("h1",{children:"Register"}),Object(ee.jsxs)(Z.a,{autoComplete:"off",onSubmit:function(e){e.preventDefault(),O===m?(y(function(e,t,r){return function(){var a=Object(W.a)(V.a.mark((function a(n){var c,s,o;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:k}),c={headers:{"Content-Type":"application/json"}},a.next=5,K.a.post("/api/v1/users/",{email:t,password:r,name:e},c);case 5:s=a.sent,o=s.data,n({type:w,payload:o}),n({type:C,payload:o}),localStorage.setItem("userInfo",JSON.stringify(o)),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),n({type:E,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.response});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}(o,j,O)),d(""),h(""),i(""),g("")):y(fe("Password do not match","danger"))},children:[Object(ee.jsxs)(Z.a.Group,{children:[Object(ee.jsx)(Z.a.Label,{children:"Name"}),Object(ee.jsx)(Z.a.Control,{type:"text",placeholder:"Enter Name",autoComplete:"off",value:o,onChange:function(e){return i(e.target.value)},required:!0})]}),Object(ee.jsxs)(Z.a.Group,{children:[Object(ee.jsx)(Z.a.Label,{children:"Email Address"}),Object(ee.jsx)(Z.a.Control,{type:"email",required:!0,placeholder:"Enter Email",autoComplete:"off",value:j,onChange:function(e){return d(e.target.value)}})]}),Object(ee.jsxs)(Z.a.Group,{children:[Object(ee.jsx)(Z.a.Label,{children:"Password"}),Object(ee.jsx)(Z.a.Control,{type:"password",required:!0,placeholder:"Enter Password",autoComplete:"off",value:O,onChange:function(e){return h(e.target.value)}})]}),Object(ee.jsxs)(Z.a.Group,{children:[Object(ee.jsx)(Z.a.Label,{children:"Confirm Password"}),Object(ee.jsx)(Z.a.Control,{type:"password",placeholder:"Enter Password",autoComplete:"off",required:!0,value:m,onChange:function(e){return g(e.target.value)}})]}),Object(ee.jsx)($.a,{type:"submit",variant:"primary",disabled:T||!o,children:T?"loading...":"Sign Up"})]}),Object(ee.jsx)(ne.a,{className:"py-3",children:Object(ee.jsxs)(ce.a,{children:["Have an account? ",Object(ee.jsx)(F.Link,{to:v?"/login?redirect=".concat(v):"/login",children:"Login"})]})})]})},Pe=function(e){var t=e.history,r=Object(a.useState)(""),n=Object(X.a)(r,2),c=n[0],o=n[1],i=Object(a.useState)(""),l=Object(X.a)(i,2),u=l[0],j=l[1],d=Object(a.useState)(""),b=Object(X.a)(d,2),p=b[0],O=b[1],h=Object(a.useState)(""),f=Object(X.a)(h,2),x=f[0],m=f[1],g=Object(s.b)(),v=Object(s.c)((function(e){return e.userDetails})),y=v.user,S=v.error,C=v.loading,I=Object(s.c)((function(e){return e.userLogin})).userInfo;Object(a.useEffect)((function(){var e;S&&g(fe(S,"danger")),I?y.name?(o(y.name),j(y.email),O(""),m("")):g((e="profile",function(){var t=Object(W.a)(V.a.mark((function t(r,a){var n,c,s,o,i;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a(),c=n.userLogin.userInfo,t.prev=1,r({type:L}),s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,K.a.get("/api/v1/users/".concat(e),s);case 6:o=t.sent,i=o.data,r({type:T,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),r({type:_,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.response});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,r){return t.apply(this,arguments)}}())):t.push("/login")}),[t,I,g,S,y]);return Object(ee.jsxs)(ne.a,{children:[Object(ee.jsxs)(ce.a,{md:3,children:[Object(ee.jsx)("h3",{children:"User Profile"}),Object(ee.jsxs)(Z.a,{autoComplete:"off",onSubmit:function(e){e.preventDefault(),p===x?(j(""),O(""),o(""),m("")):g(fe("Password do not match","danger"))},children:[Object(ee.jsxs)(Z.a.Group,{children:[Object(ee.jsx)(Z.a.Label,{children:"Name"}),Object(ee.jsx)(Z.a.Control,{type:"text",placeholder:"Enter Name",autoComplete:"off",value:c,onChange:function(e){return o(e.target.value)},required:!0})]}),Object(ee.jsxs)(Z.a.Group,{children:[Object(ee.jsx)(Z.a.Label,{children:"Email Address"}),Object(ee.jsx)(Z.a.Control,{type:"email",required:!0,placeholder:"Enter Email",autoComplete:"off",value:u,onChange:function(e){return j(e.target.value)}})]}),Object(ee.jsxs)(Z.a.Group,{children:[Object(ee.jsx)(Z.a.Label,{children:"Password"}),Object(ee.jsx)(Z.a.Control,{type:"password",required:!0,placeholder:"Enter Password",autoComplete:"off",value:p,onChange:function(e){return O(e.target.value)}})]}),Object(ee.jsxs)(Z.a.Group,{children:[Object(ee.jsx)(Z.a.Label,{children:"Confirm Password"}),Object(ee.jsx)(Z.a.Control,{type:"password",placeholder:"Enter Password",autoComplete:"off",required:!0,value:x,onChange:function(e){return m(e.target.value)}})]}),Object(ee.jsx)($.a,{type:"submit",variant:"primary",disabled:C,children:C?"loading...":"Save"})]})]}),Object(ee.jsx)(ce.a,{md:9,children:Object(ee.jsx)("h3",{children:"My Order"})})]})};var Ue=function(){var e=Object(s.c)((function(e){return e.alerts.errorMessages}));return Object(ee.jsxs)(F.BrowserRouter,{children:[Object(ee.jsx)(ae,{title:"Task Tracker"}),Object(ee.jsx)("main",{className:"py-3",children:Object(ee.jsxs)(M.a,{children:[e&&e.map((function(e){return Object(ee.jsx)(ye,{variant:e.errorType,children:e.errorMessage},e._id)})),Object(ee.jsx)(q.d,{path:"/",component:Ce,exact:!0}),Object(ee.jsx)(q.d,{path:"/product/:id",component:Ee}),Object(ee.jsx)(q.d,{path:"/cart/",component:Te}),Object(ee.jsx)(q.d,{path:"/login",component:Ne,exact:!0}),Object(ee.jsx)(q.d,{path:"/register",component:Re,exact:!0}),Object(ee.jsx)(q.d,{path:"/profile",component:Pe,exact:!0}),Object(ee.jsx)(q.d,{path:"/search/:keyword",component:Ce})]})}),Object(ee.jsx)(se,{})]})},De=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,132)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))};c.a.render(Object(ee.jsx)(s.a,{store:A,children:Object(ee.jsx)(Ue,{})}),document.getElementById("root")),De()},87:function(e,t,r){},88:function(e,t,r){}},[[113,1,2]]]);
//# sourceMappingURL=main.ecefdd97.chunk.js.map